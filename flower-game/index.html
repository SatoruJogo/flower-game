<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üå∏ Flower Garden Game üå∏</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
    height:100vh;
    background:linear-gradient(135deg,#ffecd2,#fcb69f);
    display:flex;
    justify-content:center;
    align-items:center;
    overflow:hidden;
    font-family:Arial;
}
#gameContainer{
    width:100vw;
    max-width:500px;
    height:100vh;
    background:linear-gradient(#87CEEB,#98D8C8,#90EE90);
    position:relative;
    overflow:hidden;
}
#score,#lives{
    position:absolute;
    padding:10px 15px;
    background:rgba(255,105,180,.9);
    color:white;
    border-radius:15px;
    font-weight:bold;
    z-index:10;
}
#score{top:15px; left:60px;}
#lives{top:15px; right:15px;}
#pauseBtn{
    position:absolute;
    top:15px; left:15px;
    width:40px; height:40px;
    text-align:center;
    line-height:40px;
    cursor:pointer;
    font-size:20px;
    z-index:15;
    background:rgba(255,105,180,.9);
    border-radius:50%;
}
#character{
    position:absolute;
    width:70px;
    height:90px;
    z-index:5;
}
#character img{
    width:100%;
    height:100%;
    object-fit:contain;
    pointer-events:none;
}
.flower{
    position:absolute;
    font-size:34px;
    pointer-events:none;
}
#ground{
    position:absolute;
    bottom:0;
    left:0;
    width:100%;
    height:90px;
    background:linear-gradient(to top, #228B22, #90EE90);
    z-index:3;
}
#startScreen{
    position:absolute;
    inset:0;
    display:flex; 
    flex-direction:column;
    justify-content:center;
    align-items:center;
    text-align:center;
    z-index:50;
    background: linear-gradient(135deg, #FFE4E1, #FFD1DC);
    overflow:hidden;
}
#startScreen h1{
    font-size:40px;
    color:#FF1493;
    margin-bottom:15px;
    z-index:51;
    position:relative;
}
#startScreen p{
    font-size:20px;
    margin-bottom:30px;
    color:#333;
    z-index:51;
    position:relative;
}
#startScreen button{
    z-index:51;
    position:relative;
}
#gameOver{
    position:absolute;
    inset:0;
    display:none;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    text-align:center;
    z-index:60;
    background: rgba(255,182,193,0.95);
}
button{
    margin-top:20px;
    padding:15px 50px;
    border:none;
    border-radius:50px;
    font-size:22px;
    background:#ff69b4;
    color:white;
    font-weight:bold;
    cursor:pointer;
    box-shadow:0 4px 10px rgba(0,0,0,0.2);
}
button:active{
    transform:scale(0.95);
}
</style>
</head>
<body>
<div id="gameContainer">

<div id="startScreen">
<h1>Welcome, cute flower üå∏</h1>
<p>Drag on mobile or move mouse on PC to catch flowers that are as pretty as you!!!</p>
<button id="startBtn">Play</button>
</div>

<div id="score">Flowers: 0</div>
<div id="lives">üíñüíñüíñ</div>
<div id="pauseBtn">‚è∏Ô∏è</div>

<div id="character">
    <img src="character-idle.png" alt="Character" id="charImg"> <!-- Replace with your PNGs -->
</div>

<div id="ground"></div>

<div id="gameOver">
<h2>Beautiful as always üå∫</h2>
<p id="finalScore"></p>
<button id="restartBtn">Play Again</button>
</div>

</div>

<script>
const game = document.getElementById("gameContainer");
const char = document.getElementById("character");
const charImg = document.getElementById("charImg");
const scoreEl = document.getElementById("score");
const livesEl = document.getElementById("lives");
const start = document.getElementById("startScreen");
const over = document.getElementById("gameOver");
const final = document.getElementById("finalScore");
const pauseBtn = document.getElementById("pauseBtn");
const ground = document.getElementById("ground");

let score = 0, lives = 3, active = false, paused = false, flowers = [];
let charX = 0;
let isTouching = false, mouseMoving = false;
let lastDirectionPos = 0;

/* CHARACTER SPRITES */
const sprites = {
    idle: "character-idle.png",
    left: "character-left.png",
    right: "character-right.png"
};

/* CHARACTER MOVEMENT */
function clamp(){ 
    const max = game.offsetWidth - char.offsetWidth;
    charX = Math.max(0, Math.min(max, charX));
    char.style.left = charX + "px";
    updateCharacterSprite();
}
function updateCharBottom(){ char.style.bottom = ground.offsetHeight + "px"; }

/* Update sprite based on movement or direction */
function updateCharacterSprite() {
    if(isTouching || mouseMoving){
        if(charX < lastDirectionPos) charImg.src = sprites.left;
        else if(charX > lastDirectionPos) charImg.src = sprites.right;
        lastDirectionPos = charX;
    } else {
        charImg.src = sprites.idle;
    }
}

/* Mobile drag */
game.addEventListener("touchstart", e=>{ if(active){isTouching=true; moveTouch(e);} });
game.addEventListener("touchmove", e=>{ if(active && isTouching){ moveTouch(e); } });
game.addEventListener("touchend", ()=>{ isTouching=false; updateCharacterSprite(); });
function moveTouch(e){
    const rect = game.getBoundingClientRect();
    charX = e.touches[0].clientX - rect.left - char.offsetWidth/2;
    clamp();
}

/* PC cursor follow side-to-side */
game.addEventListener("mousemove", e=>{
    if(active){
        const rect = game.getBoundingClientRect();
        charX = e.clientX - rect.left - char.offsetWidth/2;
        clamp();
        mouseMoving = true;
        clearTimeout(mouseStopTimeout);
        mouseStopTimeout = setTimeout(()=>{ mouseMoving=false; updateCharacterSprite(); }, 150);
    }
});
let mouseStopTimeout;

/* GAME FLOWERS */
function spawn(){
    const f = document.createElement("div");
    f.className = "flower";
    f.textContent = ["üå∏","üå∫","üåº","üåª","üå∑","üåπ"][Math.floor(Math.random()*6)];
    f.style.left = Math.random()*(game.offsetWidth-40)+"px";
    f.style.top = "-40px";
    f.speed = Math.random()*1.2+1;
    game.appendChild(f);
    flowers.push(f);
}

/* START SCREEN FLOWERS */
let startFlowers = [];
function spawnStartFlower(){
    const f = document.createElement("div");
    f.className = "flower";
    f.textContent = ["üå∏","üå∑","üíó"][Math.floor(Math.random()*3)];
    f.style.left = Math.random()*(game.offsetWidth-40)+"px";
    f.style.top = "-40px";
    f.speed = Math.random()*0.6+0.2;
    f.style.fontSize = "28px";
    start.appendChild(f);
    startFlowers.push(f);
}
function loopStartFlowers(){
    startFlowers.forEach((f,i)=>{
        f.style.top = f.offsetTop + f.speed + "px";
        if(f.offsetTop>start.offsetHeight){
            f.remove(); startFlowers.splice(i,1);
        }
    });
    if(!active) requestAnimationFrame(loopStartFlowers);
}
setInterval(()=>{ if(!active) spawnStartFlower(); }, 500);
requestAnimationFrame(loopStartFlowers);

/* GAME LOOP */
let lastSpawn = 0;
let spawnDelay = 1200;
function loop(time){
    if(!active || paused) return requestAnimationFrame(loop);
    if(time - lastSpawn > spawnDelay){
        spawn();
        lastSpawn = time;
        if(spawnDelay>600) spawnDelay-=2;
    }

    const c = char.getBoundingClientRect();
    const g = ground.getBoundingClientRect();

    flowers.forEach((f,i)=>{
        f.style.top = f.offsetTop + f.speed + "px";
        const r = f.getBoundingClientRect();
        if(r.bottom > c.top && r.left < c.right && r.right > c.left){
            score++;
            scoreEl.textContent = "Flowers: "+score;
            f.remove(); flowers.splice(i,1);
        } else if(r.bottom >= g.top){
            f.remove(); flowers.splice(i,1);
            lives--;
            livesEl.textContent = "üíñ".repeat(lives);
            if(lives<=0) endGame();
        }
    });
    requestAnimationFrame(loop);
}

/* START GAME */
function startGame(){
    score=0;lives=3;flowers.forEach(f=>f.remove());flowers=[];
    startFlowers.forEach(f=>f.remove());startFlowers=[];
    spawnDelay=1200; lastSpawn=0;
    scoreEl.textContent="Flowers: 0"; livesEl.textContent="üíñüíñüíñ";
    charX = game.offsetWidth/2 - char.offsetWidth/2; clamp();
    updateCharBottom();
    start.style.display="none"; over.style.display="none"; active=true; paused=false;
    requestAnimationFrame(loop);
}

/* END GAME */
function endGame(){
    active=false;
    final.textContent="You collected "+score+" flowers üå∏";
    over.style.display="flex";
}

/* PAUSE BUTTON */
pauseBtn.onclick = ()=>{
    if(!active) return;
    paused = !paused;
    pauseBtn.textContent = paused ? "‚ñ∂Ô∏è" : "‚è∏Ô∏è";
    if(!paused) requestAnimationFrame(loop);
}

/* BUTTONS */
startBtn.onclick = startGame;
restartBtn.onclick = startGame;
</script>
</body>
</html>
